Syspro Spring 2022

Sdi1300175 		Ηλίας Τζιώτης




Η εργασία υλοποιήθηκε σε γλώσσα C και παραδόθηκε μόνο το 1ο ζητούμενο της άσκησης.

Ο κώδικας υλοποιεί κατά το πλείστον τα ζητούμενα της άσκησης με τη μόνη διαφορά ότι κατά την έναρξη, δεν δημιουργεί τόσους workers,  όσα αρχεία βρίσκει η inotifywait.

Έχει υλοποιηθεί μια δομή queue τόσο για την αποθήκευση των workers, όσο και για την αναζήτηση των sites σε ξεχωριστές συναρτήσεις.

Ο listener μεταφέρει το output της inotifywait με τη χρήση dup στον manager.
Μετά χρησιμοποιέιται η strtok για την απομόνωση του output της inotifywait σε λέξεις.

Έπειτα ο manager τσεκάρει στην ουρά με την searchPid αν υπάρχουν available workers και :
αν όχι δημιουργεί named pipe και (fork) worker και τον προσθέτει στην ουρά
αν ναι δίνει σήμα SIGCONT στον worker και γράφει στο namedpipe

Ο worker διαβάζει από το named pipe το όνομα του αρχείου και έπειτα κάνει την αναζήτηση των sites και σταματάει τον εαυτό του.

Η αναζήτηση των sites βρίσκεται σε ξεχωριστό αρχείο SearchSites.c όπου διαβάζεται το επιλεγμένο αρχείο, αποθηκεύονται τα site και οι φορές που έχουν εμφανιστεί σε μία ουρά και στο τέλος με τη χρήση της sprintf αποθηκεύονται όλα σε ένα string και γράφονται στο αρχείο εξόδου.

Για το signal handler έχει δηλωθεί μια global μεταβλητή η οποία μεταβάλλεται όταν πιάσει ένα σήμα ^C έτσι ώστε το πρόγραμμα να βγει από τη λούπα και να τερματίσει.

Τέλος περιμένει ο manager να τερματίσουν τα παιδιά και ελευθερώνει τη μνήμη.

Από τα αρχεία που βρίσκονται μαζί με την εργασία:
στο output βρίσκονται τα filename.out
το files είναι προαιρετικός φάκελος που βλέπει η inotifywait
